public void hide(){
    if (!isShowing())
        return;
    InputMethodManager imm = getContext().getSystemService(InputMethodManager.class);
    if (imm != null) {
        imm.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(), 0);
    }
    super.hide();
}