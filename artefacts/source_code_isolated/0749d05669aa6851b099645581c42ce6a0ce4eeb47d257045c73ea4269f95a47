public LayoutParams generateLayoutParams(ViewGroup.LayoutParams lp){
    if (lp instanceof LayoutParams) {
        return new LayoutParams((LayoutParams) lp);
    } else if (lp instanceof MarginLayoutParams) {
        return new LayoutParams((MarginLayoutParams) lp);
    } else {
        return new LayoutParams(lp);
    }
}