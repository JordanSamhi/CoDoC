public void setVisibility(@Visibility int visibility){
    boolean gotVisible = visibility != GONE && getVisibility() == GONE;
    super.setVisibility(visibility);
    if (gotVisible) {
        update();
    }
}