public int getCursorCapsMode(int reqModes){
    if (mDummyMode)
        return 0;
    final Editable content = getEditable();
    if (content == null)
        return 0;
    int a = Selection.getSelectionStart(content);
    int b = Selection.getSelectionEnd(content);
    if (a > b) {
        int tmp = a;
        a = b;
        b = tmp;
    }
    return TextUtils.getCapsMode(content, a, reqModes);
}