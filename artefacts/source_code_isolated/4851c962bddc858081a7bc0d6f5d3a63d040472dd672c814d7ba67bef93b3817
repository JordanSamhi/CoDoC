public BluetoothServerSocket listenUsingRfcommOn(int channel, boolean mitm, boolean min16DigitPin) throws IOException{
    BluetoothServerSocket socket = new BluetoothServerSocket(BluetoothSocket.TYPE_RFCOMM, true, true, channel, mitm, min16DigitPin);
    int errno = socket.mSocket.bindListen();
    if (channel == SOCKET_CHANNEL_AUTO_STATIC_NO_SDP) {
        socket.setChannel(socket.mSocket.getPort());
    }
    if (errno != 0) {
        throw new IOException("Error: " + errno);
    }
    return socket;
}