public static Uri getLookupUri(ContentResolver resolver, Uri contactUri){
    final Cursor c = resolver.query(contactUri, new String[] { Contacts.LOOKUP_KEY, Contacts._ID }, null, null, null);
    if (c == null) {
        return null;
    }
    try {
        if (c.moveToFirst()) {
            final String lookupKey = c.getString(0);
            final long contactId = c.getLong(1);
            return getLookupUri(contactId, lookupKey);
        }
    } finally {
        c.close();
    }
    return null;
}