public final void setOneShotPreviewCallback(PreviewCallback cb){
    mPreviewCallback = cb;
    mOneShot = true;
    mWithBuffer = false;
    if (cb != null) {
        mUsingPreviewAllocation = false;
    }
    setHasPreviewCallback(cb != null, false);
}