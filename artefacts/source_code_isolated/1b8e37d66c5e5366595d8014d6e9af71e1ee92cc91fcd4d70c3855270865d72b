public CharSequence coerceToStyledText(Context context){
    CharSequence text = getText();
    if (text instanceof Spanned) {
        return text;
    }
    String htmlText = getHtmlText();
    if (htmlText != null) {
        try {
            CharSequence newText = Html.fromHtml(htmlText);
            if (newText != null) {
                return newText;
            }
        } catch (RuntimeException e) {
        }
    }
    if (text != null) {
        return text;
    }
    return coerceToHtmlOrStyledText(context, true);
}