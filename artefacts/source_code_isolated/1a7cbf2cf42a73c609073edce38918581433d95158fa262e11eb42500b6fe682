public void setParameters(Parameters params){
    if (mUsingPreviewAllocation) {
        Size newPreviewSize = params.getPreviewSize();
        Size currentPreviewSize = getParameters().getPreviewSize();
        if (newPreviewSize.width != currentPreviewSize.width || newPreviewSize.height != currentPreviewSize.height) {
            throw new IllegalStateException("Cannot change preview size" + " while a preview allocation is configured.");
        }
    }
    native_setParameters(params.flatten());
}