public static final int getMetaState(long state, int meta){
    switch(meta) {
        case META_SHIFT_ON:
            if ((state & META_CAP_LOCKED) != 0)
                return LOCKED_RETURN_VALUE;
            if ((state & META_SHIFT_ON) != 0)
                return PRESSED_RETURN_VALUE;
            return 0;
        case META_ALT_ON:
            if ((state & META_ALT_LOCKED) != 0)
                return LOCKED_RETURN_VALUE;
            if ((state & META_ALT_ON) != 0)
                return PRESSED_RETURN_VALUE;
            return 0;
        case META_SYM_ON:
            if ((state & META_SYM_LOCKED) != 0)
                return LOCKED_RETURN_VALUE;
            if ((state & META_SYM_ON) != 0)
                return PRESSED_RETURN_VALUE;
            return 0;
        default:
            return 0;
    }
}