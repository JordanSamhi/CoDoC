public void saveToXml(XmlSerializer out) throws IOException{
    if (mAction != null) {
        out.attribute(null, ATTR_ACTION, mAction);
    }
    if (mData != null) {
        out.attribute(null, ATTR_DATA, mData.toString());
    }
    if (mType != null) {
        out.attribute(null, ATTR_TYPE, mType);
    }
    if (mIdentifier != null) {
        out.attribute(null, ATTR_IDENTIFIER, mIdentifier);
    }
    if (mComponent != null) {
        out.attribute(null, ATTR_COMPONENT, mComponent.flattenToShortString());
    }
    out.attribute(null, ATTR_FLAGS, Integer.toHexString(getFlags()));
    if (mCategories != null) {
        out.startTag(null, TAG_CATEGORIES);
        for (int categoryNdx = mCategories.size() - 1; categoryNdx >= 0; --categoryNdx) {
            out.attribute(null, ATTR_CATEGORY, mCategories.valueAt(categoryNdx));
        }
        out.endTag(null, TAG_CATEGORIES);
    }
}