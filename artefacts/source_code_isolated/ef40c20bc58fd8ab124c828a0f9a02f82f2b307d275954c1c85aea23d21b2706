public int getLayoutMode(){
    if (mLayoutMode == LAYOUT_MODE_UNDEFINED) {
        int inheritedLayoutMode = (mParent instanceof ViewGroup) ? ((ViewGroup) mParent).getLayoutMode() : LAYOUT_MODE_DEFAULT;
        setLayoutMode(inheritedLayoutMode, false);
    }
    return mLayoutMode;
}