public static int getAppIdFromSharedAppGid(int gid){
    final int appId = getAppId(gid) + Process.FIRST_APPLICATION_UID - Process.FIRST_SHARED_APPLICATION_GID;
    if (appId < 0 || appId >= Process.FIRST_SHARED_APPLICATION_GID) {
        return -1;
    }
    return appId;
}