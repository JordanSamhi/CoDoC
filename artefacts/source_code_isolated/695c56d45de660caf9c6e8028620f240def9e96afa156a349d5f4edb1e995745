public void registerInputDeviceListener(InputDeviceListener listener, Handler handler){
    if (listener == null) {
        throw new IllegalArgumentException("listener must not be null");
    }
    synchronized (mInputDevicesLock) {
        populateInputDevicesLocked();
        int index = findInputDeviceListenerLocked(listener);
        if (index < 0) {
            mInputDeviceListeners.add(new InputDeviceListenerDelegate(listener, handler));
        }
    }
}