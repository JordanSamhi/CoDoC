public boolean hasWindowFocus(){
    Window w = getWindow();
    if (w != null) {
        View d = w.getDecorView();
        if (d != null) {
            return d.hasWindowFocus();
        }
    }
    return false;
}