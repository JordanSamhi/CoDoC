public void writeByteArray(int bits, byte[] arr) throws AccessException{
    for (int i = 0; i < arr.length; i++) {
        int increment = Math.min(8, bits - (i << 3));
        if (increment > 0) {
            write(increment, (byte) (arr[i] >>> (8 - increment)));
        }
    }
}