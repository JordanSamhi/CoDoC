public static boolean stateSetMatches(int[] stateSpec, int[] stateSet){
    if (stateSet == null) {
        return (stateSpec == null || isWildCard(stateSpec));
    }
    int stateSpecSize = stateSpec.length;
    int stateSetSize = stateSet.length;
    for (int i = 0; i < stateSpecSize; i++) {
        int stateSpecState = stateSpec[i];
        if (stateSpecState == 0) {
            return true;
        }
        final boolean mustMatch;
        if (stateSpecState > 0) {
            mustMatch = true;
        } else {
            mustMatch = false;
            stateSpecState = -stateSpecState;
        }
        boolean found = false;
        for (int j = 0; j < stateSetSize; j++) {
            final int state = stateSet[j];
            if (state == 0) {
                if (mustMatch) {
                    return false;
                } else {
                    break;
                }
            }
            if (state == stateSpecState) {
                if (mustMatch) {
                    found = true;
                    break;
                } else {
                    return false;
                }
            }
        }
        if (mustMatch && !found) {
            return false;
        }
    }
    return true;
}