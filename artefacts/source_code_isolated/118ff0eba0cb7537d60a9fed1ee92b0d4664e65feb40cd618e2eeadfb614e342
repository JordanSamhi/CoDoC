public static SmsMessage createFromPdu(byte[] pdu){
    SmsMessageBase wrappedMessage;
    int activePhone = TelephonyManager.getDefault().getCurrentPhoneType();
    if (PHONE_TYPE_CDMA == activePhone) {
        wrappedMessage = com.android.internal.telephony.cdma.SmsMessage.createFromPdu(pdu);
    } else {
        wrappedMessage = com.android.internal.telephony.gsm.SmsMessage.createFromPdu(pdu);
    }
    return new SmsMessage(wrappedMessage);
}