public boolean swipe(Point[] segments, int segmentSteps){
    boolean ret = false;
    int swipeSteps = segmentSteps;
    double xStep = 0;
    double yStep = 0;
    if (segmentSteps == 0)
        segmentSteps = 1;
    if (segments.length == 0)
        return false;
    ret = touchDown(segments[0].x, segments[0].y);
    for (int seg = 0; seg < segments.length; seg++) {
        if (seg + 1 < segments.length) {
            xStep = ((double) (segments[seg + 1].x - segments[seg].x)) / segmentSteps;
            yStep = ((double) (segments[seg + 1].y - segments[seg].y)) / segmentSteps;
            for (int i = 1; i < swipeSteps; i++) {
                ret &= touchMove(segments[seg].x + (int) (xStep * i), segments[seg].y + (int) (yStep * i));
                if (ret == false)
                    break;
                SystemClock.sleep(MOTION_EVENT_INJECTION_DELAY_MILLIS);
            }
        }
    }
    ret &= touchUp(segments[segments.length - 1].x, segments[segments.length - 1].y);
    return (ret);
}