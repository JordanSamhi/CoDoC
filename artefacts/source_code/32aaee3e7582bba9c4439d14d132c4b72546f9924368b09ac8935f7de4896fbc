public boolean matchesSpec(EndPoint spec){
    if (userId != spec.userId && userId != UserHandle.USER_ALL && spec.userId != UserHandle.USER_ALL) {
        return false;
    }
    boolean accountsMatch;
    if (spec.account == null) {
        accountsMatch = true;
    } else {
        accountsMatch = account.equals(spec.account);
    }
    boolean providersMatch;
    if (spec.provider == null) {
        providersMatch = true;
    } else {
        providersMatch = provider.equals(spec.provider);
    }
    return accountsMatch && providersMatch;
}