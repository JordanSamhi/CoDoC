public int getOffsetForPosition(float x, float y){
    if (getLayout() == null)
        return -1;
    final int line = getLineAtCoordinate(y);
    final int offset = getOffsetAtCoordinate(line, x);
    return offset;
}