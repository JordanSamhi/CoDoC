public int hashCode(){
    int hash = toString().hashCode();
    hash = hash * 31 + mSpanCount;
    for (int i = 0; i < mSpanCount; ++i) {
        Object span = mSpans[i];
        if (span != this) {
            hash = hash * 31 + span.hashCode();
        }
        hash = hash * 31 + getSpanStart(span);
        hash = hash * 31 + getSpanEnd(span);
        hash = hash * 31 + getSpanFlags(span);
    }
    return hash;
}