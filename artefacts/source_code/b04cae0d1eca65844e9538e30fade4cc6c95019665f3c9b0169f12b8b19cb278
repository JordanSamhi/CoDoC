public void addOnAttachStateChangeListener(OnAttachStateChangeListener listener){
    ListenerInfo li = getListenerInfo();
    if (li.mOnAttachStateChangeListeners == null) {
        li.mOnAttachStateChangeListeners = new CopyOnWriteArrayList<OnAttachStateChangeListener>();
    }
    li.mOnAttachStateChangeListeners.add(listener);
}