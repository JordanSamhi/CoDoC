public void flush(){
    synchronized (lock) {
        try {
            flushLocked();
            if (!mIoError) {
                if (mOutputStream != null) {
                    mOutputStream.flush();
                } else if (mWriter != null) {
                    mWriter.flush();
                }
            }
        } catch (IOException e) {
            Log.w("FastPrintWriter", "Write failure", e);
            setError();
        }
    }
}