public BluetoothGattServer openGattServer(Context context, BluetoothGattServerCallback callback, int transport){
    if (context == null || callback == null) {
        throw new IllegalArgumentException("null parameter: " + context + " " + callback);
    }
    try {
        IBluetoothManager managerService = mAdapter.getBluetoothManager();
        IBluetoothGatt iGatt = managerService.getBluetoothGatt();
        if (iGatt == null) {
            Log.e(TAG, "Fail to get GATT Server connection");
            return null;
        }
        BluetoothGattServer mGattServer = new BluetoothGattServer(iGatt, transport);
        Boolean regStatus = mGattServer.registerCallback(callback);
        return regStatus ? mGattServer : null;
    } catch (RemoteException e) {
        Log.e(TAG, "", e);
        return null;
    }
}