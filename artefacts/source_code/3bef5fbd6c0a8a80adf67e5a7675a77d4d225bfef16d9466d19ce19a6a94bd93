public void setSubtitleWidget(RenderingWidget subtitleWidget){
    if (mSubtitleWidget == subtitleWidget) {
        return;
    }
    final boolean attachedToWindow = isAttachedToWindow();
    if (mSubtitleWidget != null) {
        if (attachedToWindow) {
            mSubtitleWidget.onDetachedFromWindow();
        }
        mSubtitleWidget.setOnChangedListener(null);
    }
    mSubtitleWidget = subtitleWidget;
    if (subtitleWidget != null) {
        if (mSubtitlesChangedListener == null) {
            mSubtitlesChangedListener = new RenderingWidget.OnChangedListener() {

                @Override
                public void onChanged(RenderingWidget renderingWidget) {
                    invalidate();
                }
            };
        }
        setWillNotDraw(false);
        subtitleWidget.setOnChangedListener(mSubtitlesChangedListener);
        if (attachedToWindow) {
            subtitleWidget.onAttachedToWindow();
            requestLayout();
        }
    } else {
        setWillNotDraw(true);
    }
    invalidate();
}