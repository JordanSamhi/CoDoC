public void write(int bits, int data) throws AccessException{
    if ((bits < 0) || (bits > 8)) {
        throw new AccessException("illegal write (" + bits + " bits)");
    }
    possExpand(bits);
    data &= (-1 >>> (32 - bits));
    int index = mPos >>> 3;
    int offset = 16 - (mPos & 0x07) - bits;
    data <<= offset;
    mPos += bits;
    mBuf[index] |= data >>> 8;
    if (offset < 8)
        mBuf[index + 1] |= data & 0xFF;
}