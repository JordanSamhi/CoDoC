public void killApplication(String pkg, int appId, int userId, String reason){
    if (pkg == null) {
        return;
    }
    if (appId < 0) {
        Slog.w(TAG, "Invalid appid specified for pkg : " + pkg);
        return;
    }
    int callerUid = Binder.getCallingUid();
    if (UserHandle.getAppId(callerUid) == SYSTEM_UID) {
        Message msg = mHandler.obtainMessage(KILL_APPLICATION_MSG);
        msg.arg1 = appId;
        msg.arg2 = userId;
        Bundle bundle = new Bundle();
        bundle.putString("pkg", pkg);
        bundle.putString("reason", reason);
        msg.obj = bundle;
        mHandler.sendMessage(msg);
    } else {
        throw new SecurityException(callerUid + " cannot kill pkg: " + pkg);
    }
}