public void setImpl(ResourcesImpl impl){
    if (impl == mResourcesImpl) {
        return;
    }
    mBaseApkAssetsSize = ArrayUtils.size(impl.getAssets().getApkAssets());
    mResourcesImpl = impl;
    synchronized (mThemeRefs) {
        final int count = mThemeRefs.size();
        for (int i = 0; i < count; i++) {
            WeakReference<Theme> weakThemeRef = mThemeRefs.get(i);
            Theme theme = weakThemeRef != null ? weakThemeRef.get() : null;
            if (theme != null) {
                theme.setImpl(mResourcesImpl.newThemeImpl(theme.getKey()));
            }
        }
    }
}