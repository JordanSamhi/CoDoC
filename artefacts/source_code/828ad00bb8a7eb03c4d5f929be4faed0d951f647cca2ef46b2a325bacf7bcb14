public static AudioDeviceInfo[] getDevicesStatic(int flags){
    ArrayList<AudioDevicePort> ports = new ArrayList<AudioDevicePort>();
    int status = AudioManager.listAudioDevicePorts(ports);
    if (status != AudioManager.SUCCESS) {
        return new AudioDeviceInfo[0];
    }
    return infoListFromPortList(ports, flags);
}