public AccessibilityWindowInfo getWindow(int connectionId, int accessibilityWindowId, boolean bypassCache){
    try {
        IAccessibilityServiceConnection connection = getConnection(connectionId);
        if (connection != null) {
            AccessibilityWindowInfo window;
            if (!bypassCache) {
                window = sAccessibilityCache.getWindow(accessibilityWindowId);
                if (window != null) {
                    if (DEBUG) {
                        Log.i(LOG_TAG, "Window cache hit");
                    }
                    return window;
                }
                if (DEBUG) {
                    Log.i(LOG_TAG, "Window cache miss");
                }
            }
            final long identityToken = Binder.clearCallingIdentity();
            try {
                window = connection.getWindow(accessibilityWindowId);
            } finally {
                Binder.restoreCallingIdentity(identityToken);
            }
            if (window != null) {
                if (!bypassCache) {
                    sAccessibilityCache.addWindow(window);
                }
                return window;
            }
        } else {
            if (DEBUG) {
                Log.w(LOG_TAG, "No connection for connection id: " + connectionId);
            }
        }
    } catch (RemoteException re) {
        Log.e(LOG_TAG, "Error while calling remote getWindow", re);
    }
    return null;
}