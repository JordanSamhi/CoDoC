public static EnforcedAdmin checkIfAccountManagementDisabled(Context context, String accountType, int userId){
    if (accountType == null) {
        return null;
    }
    DevicePolicyManager dpm = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);
    PackageManager pm = context.getPackageManager();
    if (!pm.hasSystemFeature(PackageManager.FEATURE_DEVICE_ADMIN) || dpm == null) {
        return null;
    }
    boolean isAccountTypeDisabled = false;
    String[] disabledTypes = dpm.getAccountTypesWithManagementDisabledAsUser(userId);
    for (String type : disabledTypes) {
        if (accountType.equals(type)) {
            isAccountTypeDisabled = true;
            break;
        }
    }
    if (!isAccountTypeDisabled) {
        return null;
    }
    return getProfileOrDeviceOwner(context, getUserHandleOf(userId));
}