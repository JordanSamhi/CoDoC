public long getSelectedId(){
    long packedPos = getSelectedPosition();
    if (packedPos == PACKED_POSITION_VALUE_NULL)
        return -1;
    int groupPos = getPackedPositionGroup(packedPos);
    if (getPackedPositionType(packedPos) == PACKED_POSITION_TYPE_GROUP) {
        return mAdapter.getGroupId(groupPos);
    } else {
        return mAdapter.getChildId(groupPos, getPackedPositionChild(packedPos));
    }
}