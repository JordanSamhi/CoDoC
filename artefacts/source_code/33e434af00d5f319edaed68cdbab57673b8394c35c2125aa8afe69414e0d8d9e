public static int getUserIdFromAuthority(String auth, int defaultUserId){
    if (auth == null)
        return defaultUserId;
    int end = auth.lastIndexOf('@');
    if (end == -1)
        return defaultUserId;
    String userIdString = auth.substring(0, end);
    try {
        return Integer.parseInt(userIdString);
    } catch (NumberFormatException e) {
        Log.w(TAG, "Error parsing userId.", e);
        return UserHandle.USER_NULL;
    }
}