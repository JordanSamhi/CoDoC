public void setMark(long elapsedRealtimeMs){
    final long batteryRealtime = mTimeBase.getRealtime(elapsedRealtimeMs * 1000);
    if (mNesting > 0) {
        if (mTimerPool != null) {
            refreshTimersLocked(batteryRealtime, mTimerPool, this);
        } else {
            mTotalTime += batteryRealtime - mUpdateTime;
            mUpdateTime = batteryRealtime;
        }
    }
    mTimeBeforeMark = mTotalTime;
}