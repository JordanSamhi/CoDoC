public static float parseFloatPercentage(String s) throws NumberFormatException{
    if (!s.endsWith("%")) {
        throw new NumberFormatException("does not end in %");
    }
    s = s.substring(0, s.length() - 1);
    if (s.matches(".*[^0-9.].*")) {
        throw new NumberFormatException("contains an invalid character");
    }
    try {
        float value = Float.parseFloat(s);
        if (value < 0.0f || value > 100.0f) {
            throw new NumberFormatException("is out of range");
        }
        return value;
    } catch (NumberFormatException e) {
        throw new NumberFormatException("is not a number");
    }
}